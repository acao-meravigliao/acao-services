{{page-title "Pagamenti pendenti"}}

<div class="container page authen-debt-index">
  <div class="box">
    <div class="grid">
      <div class="cell">
        {{#each-in this.presets as |symbol preset|}}
          <a {{on "click" (fn this.set_preset symbol)}}>
            <span class="tag {{if (eq this.preset symbol) "is-success" "is-dark"}}">
              {{t (concat "presets." symbol)}}
            </span>
          </a>
        {{/each-in}}
      </div>
    </div>
  </div>

  <div class="grid is-col-min-20">
    {{#each this.sorted_debts key="id" as |debt|}}
      <div class="card cell">
        <div class="card-content">
          <div class="media">
            <div class="media-left">
              <figure class="image is-48x48">
               <FaIcon @icon="dollar-sign" @size="3x" />
              </figure>
            </div>
            <div class="media-content">
              <p class="title is-4">
                <LinkTo @route="authen.debt.show" @model={{debt.id}}>
                  {{debt.identifier}}
                </LinkTo>
              </p>
              <p class="subtitle is-6">{{debt.descr}}</p>
            </div>
            <div class="media-right">
              <h1 class="title">
                {{format-number debt.total style="currency" currency="EUR"}}
              </h1>
            </div>
          </div>
          <div class="content">
            Creato il:
              <strong><time datetime="{{debt.created_at}}">{{format-time debt.created_at format="timestamp"}}</time></strong><br />
            {{#if debt.expires_at}}
              Scade il:
                <strong><time datetime="{{debt.expires_at}}">{{format-time debt.expires_at format="timestamp"}}</time></strong><br />
            {{/if}}
          </div>
          <footer class="card-footer">
            <LinkTo class="card-footer-item button is-link" @route="authen.debt.show" @model={{debt.id}}>
              Paga
            </LinkTo>
          </footer>
        </div>
      </div>
    {{/each}}
  </div>
</div>
